!function(a,b){"use strict";function c(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$element=a(b),this.$wrapper=this.findWrapper(),this.width=null,this.height=null,this.ratio=null,this.onResize=null,this.onRemove=null,this.init()}var d=a(b);c.DEFAULTS={x:"center",y:"center",attachment:"scroll",wrapper:null,css:!0,onInit:function(){a(this).fadeTo(0,0)},onLoad:function(){a(this).fadeTo(400,1)}},c.prototype.init=function(){var c=this.options,e=this.$element,f=this.$wrapper;return c.css&&(a("html").hasClass("bgsizecover")||!b.Modernizr&&f.css("background-size","cover")&&"cover"===f.css("background-size"))?(f.css({"background-image":"url("+e.attr("src")+")","background-position":c.x+" "+c.y,"background-attachment":c.attachment}),e.hide(),void 0):("scroll"!==c.attachment||f.is("body")||(-1===a.inArray(f.css("position"),["absolute","relative","fixed"])&&f.css("position","relative"),f.css("overflow","hidden")),e.css({position:"absolute",width:"auto","min-width":"0","max-width":"none",height:"auto","min-height":"0","max-height":"none"}),this.onResize=a.proxy(this.resize,this),this.onRemove=a.proxy(this.destroy,this),d.on("resize",this.onResize),d.on("orientationchange",this.onResize),e.one("remove",this.onRemove),"function"==typeof this.options.onInit&&this.options.onInit.call(e),e.trigger("initialized.cover"),e.get(0).complete?this.loaded():e.one("load",a.proxy(this.loaded,this)),void 0)},c.prototype.destroy=function(){console.log("Cover.destroy"),d.off("resize",this.onResize),d.off("orientationchange",this.onResize),this.$element.off("remove",this.onRemove),this.$element.removeData("wxr.cover")},c.prototype.loaded=function(){this.resize(),"function"==typeof this.options.onLoad&&this.options.onLoad.call(this.$element),this.$element.trigger("loaded.cover")},c.prototype.findWrapper=function(){var b,c=this.options,d=this.$element;if("string"==typeof c.wrapper)b=d.closest(c.wrapper);else for(b=d.parent();!b.is("body")&&-1===a.inArray(b.css("position"),["relative","absolute"])&&-1===a.inArray(b.css("display"),["block","inline-block"]);)b=b.parent();return b},c.prototype.getOriginalWidth=function(){return this.width||(this.width=this.$element.attr("width")||this.$element.get(0).width||1),this.width},c.prototype.getOriginalHeight=function(){return this.height||(this.height=this.$element.attr("height")||this.$element.get(0).height||1),this.height},c.prototype.getOriginalRatio=function(){return this.ratio||(this.ratio=this.getOriginalWidth()/this.getOriginalHeight()),this.ratio},c.prototype.getWrapperWidth=function(){var a="fixed"===this.options.attachment?d:this.$wrapper;return a.width()},c.prototype.getWrapperHeight=function(){var a="fixed"===this.options.attachment?d:this.$wrapper;return a.height()},c.prototype.getWrapperRatio=function(){return this.getWrapperWidth()/(this.getWrapperHeight()||1)},c.prototype.resize=function(){var a=this.options,b=this.$element;if(this.getWrapperRatio()<this.getOriginalRatio())switch(b.css({width:"auto",height:"100%",top:0}),a.x){case"left":b.css({left:0,right:"none"});break;case"right":b.css({left:"none",right:0});break;default:b.css({left:-((b.width()-this.getWrapperWidth())/2),right:"none"})}else switch(b.css({width:"100%",height:"auto",left:0}),a.y){case"top":b.css({top:0,bottom:"none"});break;case"bottom":b.css({top:"none",bottom:0});break;default:b.css({top:-((b.height()-this.getWrapperHeight())/2),bottom:"none"})}b.trigger("resized.cover")};var e=a.fn.cover;a.fn.cover=function(b){return this.each(function(){var d=a(this),e=d.data("wxr.cover"),f="object"==typeof b?b:{};e||d.data("wxr.cover",e=new c(this,f)),"string"==typeof b&&("resize"===b?e.resize():"destroy"===b&&e.destroy())})},a.fn.cover.Constructor=c,a.fn.cover.noConflict=function(){return a.fn.cover=e,this},a(function(){a('img[data-size="cover"]').each(function(){var b=a(this);b.cover(b.data())})})}(window.jQuery,window);